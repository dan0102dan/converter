(this.webpackJsonpconverter=this.webpackJsonpconverter||[]).push([[0],{127:function(e){e.exports=JSON.parse('{"name":"converter","version":"1.5.2","description":"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u0443\u0439 \u0431\u044b\u0441\u0442\u0440\u043e \u0438 \u0443\u0434\u043e\u0431\u043d\u043e \u0444\u0430\u0439\u043b\u044b, \u043b\u044e\u0431\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430!","main":"index.js","homepage":"https://dan0102dan.github.io/converter","scripts":{"start":"cross-env PORT=10888 HTTPS=true react-scripts start","build":"react-scripts build","predeploy":"npm run build","deploy":"gh-pages -d build"},"keywords":[],"author":"","license":"MIT","devDependencies":{"babel-eslint":"^10.1.0","cross-env":"^5.2.1","eslint":"^6.6.0","eslint-config-standard":"^14.1.1","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-react":"^7.20.6","eslint-plugin-standard":"^4.0.1","gh-pages":"^3.1.0","react-hot-loader":"^4.12.21","react-scripts":"^3.4.2"},"dependencies":{"@vkontakte/icons":"^1.32.0","@vkontakte/vk-bridge":"^2.2.6","@vkontakte/vk-miniapps-deploy":"0.0.17","@vkontakte/vkui":"^3.12.0","axios-jsonp-pro":"^1.1.8","chalk":"^2.4.2","core-js":"^3.6.5","eruda":"^2.3.3","eruda-code":"^2.0.0","eruda-dom":"^2.0.0","jimp":"^0.16.0","prop-types":"^15.7.2","react":"^16.13.1","react-dom":"^16.13.1"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},128:function(e,t,a){e.exports=a.p+"static/media/backgroundLight.cb134ba0.png"},129:function(e,t,a){e.exports=a.p+"static/media/backgroundDark.a716fcdd.png"},130:function(e,t,a){e.exports=a.p+"static/media/tiff.5743d89e.png"},180:function(e,t,a){e.exports=a(289)},288:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);a(181),a(207),a(209),a(210),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249);var n=a(0),r=a.n(n),i=a(108),s=a.n(i),o=a(11),l=a.n(o),c=a(39),u=a(40),p=a(48),m=a(42),f=a(41),d=a(3),h=a(121),g=a.n(h),v=a(122),b=a.n(v),k=(a(267),a(12)),y=a.n(k),w=a(24),E=a(51),x=a.n(E),S=a(123),_=a.n(S),j=a(124),P=a.n(j),C=a(38),V=a.n(C),O=a(52),N=a.n(O),z=a(53),A=a.n(z),I=a(54),K=a.n(I),L={heic:a(71),jpeg:a(72),png:a(73),gif:a(74),pdf:a(75),wbmp:a(76)},W=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).download=Object(w.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.closePopout(),!["mobile_iphone","mobile_iphone_messenger"].includes(n.state.vk_platform)){e.next=6;break}l.a.send("VKWebAppDownloadFile",{url:n.state.link,filename:n.state.fileName+"."+n.state.value}),l.a.send("VKWebAppTapticNotificationOccurred",{type:"error"}),e.next=19;break;case 6:if(!["mobile_android","mobile_android_messenger"].includes(n.state.vk_platform)){e.next=10;break}n.openSuccess(),e.next=19;break;case 10:return t=document.createElement("a"),e.next=13,n.state.link;case 13:return t.href=e.sent,t.download=n.state.fileName+"."+n.state.value,t.target="_blank",e.next=18,t.click();case 18:n.openSuccess();case 19:if("browser"===n.state.vk_platform){e.next=25;break}return e.next=22,l.a.send("VKWebAppStorageGet",{keys:["transfers","size"]});case 22:a=e.sent,l.a.send("VKWebAppStorageSet",{key:"transfers",value:"".concat(Number(a.keys[0].value)+1)}),l.a.send("VKWebAppStorageSet",{key:"size",value:"".concat(Number(a.keys[1].value)+n.state.file.size)});case 25:case"end":return e.stop()}}),e)}))),n.closePopout=function(){n.props.setPopout(null)},n.state={activePanel:"home",activeModal:null,file:{},value:"",activeValue:"",link:"",fileName:"",userLink:"",snackbar:null,vk_platform:"browser",height:1,width:1},n}return Object(u.a)(a,[{key:"openSuccess",value:function(){var e=this;this.setState({snackbar:r.a.createElement(d.u,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(d.b,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(V.a,{fill:"#fff",width:14,height:14}))},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438!")})}},{key:"openError",value:function(){var e=this;this.setState({snackbar:r.a.createElement(d.u,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(d.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"}},r.a.createElement(N.a,{fill:"#fff",width:14,height:14}))},"\u041e\u0448\u0438\u0431\u043a\u0430")})}},{key:"componentDidMount",value:function(){if(window.location.search){var e=window.location.search.match(/vk_platform=([a-z_]+)/);this.setState({vk_platform:e[1].toString()})}}},{key:"exportPhoto",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,a,n,i,s,o,c=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.setPopout(r.a.createElement(d.s,null)),t="https://converter.dan0102dan.ru/".concat(this.state.value),(a=new FormData).append("file",this.state.file),!window.location.search){e.next=13;break}return s=window.location.search.slice(1),n=(n=window.location.search.match(/vk_user_id=([1,2,3,4,5,6,7,8,9,0]+)/))[1].toString(),e.next=10,l.a.send("VKWebAppStorageGet",{keys:["notifications"]});case 10:i=e.sent,e.next=16;break;case 13:s="null",n="unsign",i={keys:[{value:!1}]};case 16:return a.append("sign",s),a.append("user",n),a.append("fileName",this.state.fileName),a.append("notifications",i.keys[0].value),o={responseType:"blob",headers:{"content-type":"multipart/form-data"}},"cors",e.prev=22,e.next=25,x.a.post(t,a,o,"cors").then(function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/json"!==t.data.type){e.next=5;break}return console.log("authorization error"),c.closePopout(),c.setState({activePanel:"home"}),e.abrupt("return");case 5:return(a=new FileReader).onloadend=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.setState({link:a.result},c.download);case 1:case"end":return e.stop()}}),e)}))),e.next=9,a.readAsDataURL(t.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(22),this.props.setPopout(r.a.createElement(d.a,{actionsLayout:"vertical",actions:[{title:"Ok",autoclose:!0,mode:"cancel"}],onClose:this.closePopout},r.a.createElement("h2",null,"\u041f\u043b\u043e\u0445\u043e\u0435 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"),r.a.createElement("p",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0412\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f; \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0438\u0441.")));case 30:case"end":return e.stop()}}),e,this,[[22,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(d.p,{id:this.id},r.a.createElement(d.z,{activePanel:this.state.activePanel},r.a.createElement(d.p,{id:"home"},r.a.createElement(d.q,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(d.m,null,"\u0413\u0434\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0412\u0430\u0448 \u0444\u0430\u0439\u043b?"),r.a.createElement(d.c,{mode:"image",size:"m",header:"\u0412 \u0424\u043e\u0442\u043e",subheader:r.a.createElement("span",null,"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u044e",r.a.createElement("br",null),"\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e"),background:r.a.createElement("div",{style:{backgroundColor:"#1e065f",backgroundImage:"url(".concat(A.a,")"),backgroundPosition:"right center",backgroundSize:"44vh",backgroundRepeat:"no-repeat"}}),actions:r.a.createElement(d.j,{style:{opacity:.9},mode:"overlay_primary",accept:"image/*",before:r.a.createElement(_.a,null),controlSize:"l",onChange:function(t){console.log(t.target.files[0]);var a=new Image;if(a.onload=function(){e.setState({height:a.height,width:a.width})},a.src=URL.createObjectURL(t.target.files[0]),"image/png"===t.target.files[0].type)e.setState({activePanel:"export",activeValue:"png",file:t.target.files[0],fileName:t.target.files[0].name.slice(0,-4)});else if("image/heic"===t.target.files[0].type)e.setState({activeValue:"heic",file:t.target.files[0],fileName:t.target.files[0].name.slice(0,-5)});else if("image/jpeg"===t.target.files[0].type){var n=t.target.files[0].name;n=n.match(/\.jpeg$/)?n.slice(0,-5):n.slice(0,-4),e.setState({activePanel:"export",activeValue:"jpeg",file:t.target.files[0],fileName:n})}else"image/gif"===t.target.files[0].type?e.setState({activePanel:"export",activeValue:"gif",file:t.target.files[0],fileName:t.target.files[0].name.slice(0,-4)}):"image/pdf"===t.target.files[0].type?e.setState({activePanel:"export",activeValue:"pdf",file:t.target.files[0],fileName:t.target.files[0].name.slice(0,-4)}):"image/wbmp"===t.target.files[0].type?e.setState({activePanel:"export",activeValue:"wbmp",file:t.target.files[0],fileName:t.target.files[0].name.slice(0,-5)}):e.props.setPopout(r.a.createElement(d.a,{actionsLayout:"vertical",actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:e.closePopout},r.a.createElement("h2",null,"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"),r.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f; \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e\u0431 \u044d\u0442\u043e\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.")))}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e")}),r.a.createElement(d.c,{mode:"image",size:"m",header:"\u0412 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435",subheader:r.a.createElement("span",null,"\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",r.a.createElement("br",null),"\u0438 \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0432 \u043e\u043a\u043d\u043e"),background:r.a.createElement("div",{style:{backgroundColor:"#56005f",backgroundImage:"url(".concat(K.a,")"),backgroundPosition:"right center",backgroundSize:"44vh",backgroundRepeat:"no-repeat"}}),actions:r.a.createElement(d.d,{style:{backgroundColor:"#fff",color:"#000",opacity:.9},before:r.a.createElement(P.a,null),size:"l",onClick:function(){e.props.setPopout(r.a.createElement(d.a,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0414\u0430\u043b\u0435\u0435",autoclose:!0,action:function(){var t=Object(w.a)(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.setPopout(r.a.createElement(d.s,null)),t.prev=1,t.next=4,fetch("https://cors-anywhere.herokuapp.com/".concat(e.state.userLink)).then(function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz".length,n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*a));return t},e.next=3,t.blob();case 3:(a=e.sent).name=n(10),a.lastModified=Date.now(),a.webkitRelativePath="";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.props.setPopout(r.a.createElement(d.a,{actionsLayout:"vertical",actions:[{title:"Ok",autoclose:!0,mode:"cancel"}],onClose:e.closePopout},r.a.createElement("h2",null,"\u041f\u043b\u043e\u0445\u043e\u0435 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"),r.a.createElement("p",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0412\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f; \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0438\u0441.")));case 9:e.closePopout(),(n=new Image).onload=function(){e.setState({height:n.height,width:n.width})},n.src=URL.createObjectURL(a),"image/png"===a.type?e.setState({activePanel:"export",activeValue:"png",file:a,fileName:a.name}):"image/heic"===a.type?e.setState({activePanel:"export",activeValue:"heic",file:a,fileName:a.name}):"image/jpeg"===a.type?e.setState({activePanel:"export",activeValue:"jpeg",file:a,fileName:a.name}):"image/gif"===a.type?e.setState({activePanel:"export",activeValue:"gif",file:a,fileName:a.name}):"image/pdf"===a.type?e.setState({activePanel:"export",activeValue:"pdf",file:a,fileName:a.name}):"image/wbmp"===a.type?e.setState({activePanel:"export",activeValue:"wbmp",file:a,fileName:a.name}):e.props.setPopout(r.a.createElement(d.a,{actionsLayout:"vertical",actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:e.closePopout},r.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),r.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f; \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e\u0431 \u044d\u0442\u043e\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.")));case 14:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}()}],onClose:e.closePopout},r.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443"),r.a.createElement("p",null,"\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0444\u0430\u0439\u043b, \u0433\u0434\u0435 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(d.n,{style:{marginTop:16,marginBottom:-7},onChange:function(t){e.setState({userLink:t.target.value})},type:"text"})))}},"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443")})),r.a.createElement(d.p,{id:"export"},r.a.createElement(d.q,{left:r.a.createElement(d.r,{onClick:function(){return e.setState({activePanel:"home",file:{},value:"",fileName:""})}})},"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u044f"),this.state.file.name&&r.a.createElement(d.l,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("img",{src:URL.createObjectURL(this.state.file),alt:"yourPhotofile",style:{height:"21vh",objectFit:"contain",borderRadius:15}}))),this.state.file.name&&r.a.createElement(d.l,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:16}},r.a.createElement(d.m,{style:{marginRight:-3}},"\u0418\u0437"),r.a.createElement(d.n,{disabled:!0,type:"text",defaultValue:this.state.file.name.slice(0,-4)}),r.a.createElement("img",{src:L[this.state.activeValue],alt:"type file",style:{marginLeft:7,height:"44px"}}))),r.a.createElement(d.k,null,r.a.createElement(d.t,{onChange:function(t){e.setState({value:t.target.value}),["mobile_iphone","mobile_iphone_messenger"].includes(e.state.vk_platform)&&l.a.send("VKWebAppTapticSelectionChanged",{})},top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442"},"jpeg"===this.state.activeValue?null:r.a.createElement("option",{value:"jpeg"},"jpeg"),"png"===this.state.activeValue?null:r.a.createElement("option",{value:"png"},"png"),"pdf"===this.state.activeValue?null:r.a.createElement("option",{value:"pdf"},"pdf"),"wbmp"===this.state.activeValue?null:r.a.createElement("option",{value:"wbmp"},"wbmp"),"gif"===this.state.activeValue?null:r.a.createElement("option",{value:"gif"},"gif"))),this.state.value&&r.a.createElement(d.l,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:16}},r.a.createElement(d.m,{style:{marginRight:-3}},"\u0412"),r.a.createElement(d.n,{type:"text",onChange:function(t){e.setState({fileName:t.target.value})},value:this.state.fileName,status:this.state.fileName?"valid":"error"}),r.a.createElement("img",{src:L[this.state.value],alt:"type of file",style:{marginLeft:7,height:"44px"}}))),this.state.value&&this.state.fileName&&r.a.createElement(d.l,null,r.a.createElement(d.h,null,["mobile_iphone","mobile_iphone_messenger"].includes(this.state.vk_platform)?r.a.createElement(d.d,{mode:"secondary",size:"xl",onClick:Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.exportPhoto();case 2:case"end":return t.stop()}}),t)})))},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0432 ",this.state.value):r.a.createElement(d.d,{mode:"secondary",size:"xl",onClick:Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("browser"===e.state.vk_platform){t.next=15;break}if(!["mobile_android","mobile_android_messenger"].includes(e.state.vk_platform)){t.next=15;break}return t.prev=2,t.next=5,l.a.send("VKWebAppAllowMessagesFromGroup",{group_id:151064772});case 5:if(!0!==t.sent.result){t.next=9;break}return t.next=9,l.a.send("VKWebAppStorageSet",{key:"notifications",value:"true"});case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(2),e.openError(),t.abrupt("return");case 15:return t.next=17,e.exportPhoto();case 17:case"end":return t.stop()}}),t,null,[[2,11]])})))},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0432 ",this.state.value))),this.state.snackbar)))}}]),a}(r.a.Component),R=a(125),T=a.n(R),M=a(126),D=a.n(M),F=a(55),U=a.n(F),G=a(127),q=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activePanel:"profile",vk_platform:"",files_count:r.a.createElement(d.v,{size:"small"}),files_size:r.a.createElement(d.v,{size:"small"}),subscriber:!1,notifications:!1,snackbar:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,a,n,r,i,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.search){e.next=30;break}return t=window.location.search.match(/vk_platform=([a-z_]+)/),e.next=4,l.a.send("VKWebAppStorageGet",{keys:["notifications"]});case 4:return a=e.sent,["true","false"].includes(a.keys[0].value)||(a.keys[0].value="false"),this.setState({notifications:JSON.parse(a.keys[0].value),vk_platform:t[1].toString()}),n=(n=window.location.search.match(/vk_user_id=([1,2,3,4,5,6,7,8,9,0]+)/))[1].toString(),"https://converter.dan0102dan.ru/vk",r=new FormData,i="browser"!==this.state.vk_platform?window.location.search.slice(1):"null",r.append("sign",i),r.append("id",n),"cors",e.next=17,x.a.post("https://converter.dan0102dan.ru/vk",r,"cors").then(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:if(s.data.sign){e.next=21;break}this.setState({subscriber:s.data}),e.next=23;break;case 21:return console.log(s.data.sign),e.abrupt("return");case 23:return e.next=25,l.a.send("VKWebAppStorageGet",{keys:["transfers","size"]});case 25:o=e.sent,console.log(o.keys[0].value),console.log(o.keys[1].value),isNaN(o.keys[1].value)?this.setState({files_count:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}):this.setState({files_count:o.keys[0].value}),isNaN(o.keys[1].value)?this.setState({files_count:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}):this.setState({files_size:(Number(o.keys[1].value)/1e6).toFixed(3)+" \u041c\u0411"});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openSuccess",value:function(){var e=this;this.setState({snackbar:r.a.createElement(d.u,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(d.b,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(V.a,{fill:"#fff",width:14,height:14}))},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b!")})}},{key:"openError",value:function(){var e=this;this.setState({snackbar:r.a.createElement(d.u,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(d.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"}},r.a.createElement(N.a,{fill:"#fff",width:14,height:14}))},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b!")})}},{key:"openThanks",value:function(){var e=this;this.setState({snackbar:r.a.createElement(d.u,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(d.b,{size:24,style:{backgroundImage:"linear-gradient(135deg, #ffb73d, #ffa000)"}},r.a.createElement(D.a,{fill:"#fff",width:14,height:14}))},"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443!!")})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.p,{id:this.id,snackbar:this.state.snackbar},r.a.createElement(d.z,{activePanel:this.state.activePanel},r.a.createElement(d.p,{id:"profile"},r.a.createElement(d.q,null,"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440"),r.a.createElement(d.l,null,r.a.createElement("img",{src:U.a,alt:"Logo",style:{width:"100px",height:"100px",display:"block",marginLeft:"auto",marginRight:"auto"}}),r.a.createElement(d.e,{level:"1",weight:"regular",style:{marginTop:7,marginBottom:16,textAlign:"center"}},"\u0412\u0435\u0440\u0441\u0438\u044f: ",G.version)),this.state.vk_platform&&r.a.createElement(d.l,{header:r.a.createElement(d.m,{mode:"secondary"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")},r.a.createElement(d.o,null,r.a.createElement(d.f,{indicator:this.state.files_count},"\u0412\u0441\u0435\u0433\u043e \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e"),r.a.createElement(d.f,{indicator:this.state.files_size},"\u0420\u0430\u0437\u043c\u0435\u0440 \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043b\u043e\u0432"))),this.state.vk_platform&&r.a.createElement(d.l,null,r.a.createElement(d.f,{asideContent:r.a.createElement(d.w,{checked:!0===this.state.notifications,onChange:function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.target.checked){t.next=17;break}return t.next=3,l.a.send("VKWebAppAllowMessagesFromGroup",{group_id:151064772}).catch((function(){e.openError(),e.setState({notifications:!1})}));case 3:if(!(null===(n=t.sent)||void 0===n?void 0:n.result)){t.next=11;break}return e.setState({notifications:!0}),e.openSuccess(),t.next=9,l.a.send("VKWebAppStorageSet",{key:"notifications",value:"true"});case 9:t.next=15;break;case 11:return e.openError(),e.setState({notifications:!1}),t.next=15,l.a.send("VKWebAppStorageSet",{key:"notifications",value:"false"});case 15:t.next=21;break;case 17:return e.openError(),e.setState({notifications:!1}),t.next=21,l.a.send("VKWebAppStorageSet",{key:"notifications",value:"false"});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442 \u0431\u043e\u0442\u0430")),this.state.vk_platform&&r.a.createElement(d.l,null,r.a.createElement(d.f,{description:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440",indicator:this.state.subscriber?r.a.createElement(d.d,{mode:"secondary",disabled:!0},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a"):r.a.createElement(d.d,{onClick:Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.send("VKWebAppJoinGroup",{group_id:151064772});case 2:e.setState({subscriber:!0}),e.openThanks();case 4:case"end":return t.stop()}}),t)})))},"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c")},"\u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e")),this.state.vk_platform&&r.a.createElement(d.l,null,r.a.createElement(d.g,{mode:"secondary",before:r.a.createElement(T.a,null),onClick:function(){return l.a.send("VKWebAppShare",{link:"https://vk.com/app7561776"})}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c")),this.state.snackbar)))}}]),a}(r.a.Component),J=(a(288),function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activeStory:"home",popout:null,modal:null},n.onStoryChange=n.onStoryChange.bind(Object(p.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){l.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}}))}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.i,{activeStory:this.state.activeStory,tabbar:r.a.createElement(d.x,null,r.a.createElement(d.y,{onClick:this.onStoryChange,selected:"home"===this.state.activeStory,"data-story":"home",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},r.a.createElement(g.a,null)),r.a.createElement(d.y,{onClick:this.onStoryChange,selected:"profile"===this.state.activeStory,"data-story":"profile",text:"\u0420\u0430\u0437\u043d\u043e\u0435"},r.a.createElement(b.a,null)))},r.a.createElement(d.z,{id:"home",activePanel:"home",modal:this.state.modal,popout:this.state.popout},r.a.createElement(W,{setModal:function(t){return e.setState({modal:t})},setPopout:function(t){return e.setState({popout:t})},id:"home"})),r.a.createElement(d.z,{id:"profile",activePanel:"profile"},r.a.createElement(q,{id:"profile"})))}}]),a}(r.a.Component)),B=a(128),H=a.n(B),$=a(129),Q=a.n($),X=a(72),Y=a.n(X),Z=a(73),ee=a.n(Z),te=a(71),ae=a.n(te),ne=a(75),re=a.n(ne),ie=a(74),se=a.n(ie),oe=a(130),le=a.n(oe),ce=a(76),ue=a.n(ce);s.a.render(r.a.createElement(J,null),document.getElementById("root")),Promise.all([a.e(3),a.e(4)]).then(a.bind(null,293)).then((function(e){e.default})),window.Image&&((new window.Image).src=A.a,(new window.Image).src=K.a,(new window.Image).src=H.a,(new window.Image).src=Q.a,(new window.Image).src=U.a,(new window.Image).src=ue.a,(new window.Image).src=Y.a,(new window.Image).src=ee.a,(new window.Image).src=ae.a,(new window.Image).src=re.a,(new window.Image).src=se.a,(new window.Image).src=le.a),l.a.send("VKWebAppInit")},53:function(e,t,a){e.exports=a.p+"static/media/gallery.f7323948.png"},54:function(e,t,a){e.exports=a.p+"static/media/url.76ef0a53.png"},55:function(e,t,a){e.exports=a.p+"static/media/ava.85066ad8.png"},71:function(e,t,a){e.exports=a.p+"static/media/heic.3079e518.png"},72:function(e,t,a){e.exports=a.p+"static/media/jpeg.47977778.png"},73:function(e,t,a){e.exports=a.p+"static/media/png.4f228561.png"},74:function(e,t,a){e.exports=a.p+"static/media/gif.79710f9c.png"},75:function(e,t,a){e.exports=a.p+"static/media/pdf.39f4d5dc.png"},76:function(e,t,a){e.exports=a.p+"static/media/wbmp.aca94bdb.png"}},[[180,1,2]]]);
//# sourceMappingURL=main.17deed1a.chunk.js.map